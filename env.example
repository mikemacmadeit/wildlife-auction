# Firebase Configuration
# Get these values from your Firebase Console: https://console.firebase.google.com/
# Project Settings > General > Your apps > Config

NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key_here
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project_id.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
# IMPORTANT: Agchange uses the newer default bucket naming scheme.
# If you set the legacy `your_project_id.appspot.com`, uploads may fail with 404/CORS.
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project_id.firebasestorage.app
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_messaging_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your_measurement_id_optional

# Firebase Realtime Database (optional â€” live delivery tracking)
# Create a Realtime Database in Firebase Console, then set URL, e.g. https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com
# NEXT_PUBLIC_FIREBASE_DATABASE_URL=https://your_project_id-default-rtdb.firebaseio.com

# Firebase Web Push (FCM)
# From Firebase Console -> Project Settings -> Cloud Messaging -> Web Push certificates
NEXT_PUBLIC_FIREBASE_VAPID_KEY=your_web_push_vapid_key

# Google Maps (Places Autocomplete + Map for delivery address, HEB-style)
# Use NEXT_PUBLIC_GOOGLE_MAPS_KEY, or enable Maps JavaScript API + Places API on your Firebase key (NEXT_PUBLIC_FIREBASE_API_KEY above) and the app will use that. If neither is set, Set Delivery Address falls back to manual form.
# NEXT_PUBLIC_GOOGLE_MAPS_KEY=your_google_maps_api_key_here

# Firebase Admin (Server-side)
# Netlify production (recommended):
# - Set FIREBASE_SERVICE_ACCOUNT_JSON_BASE64 as a **Build-only** env var (NOT runtime), and let the build
#   generate `netlify/secrets/firebase-service-account.json` which is bundled into functions.
# - This avoids AWS Lambda's 4KB env var limit for functions.
# Generate from your downloaded service account JSON (serviceAccountKey.json):
#   PowerShell:
#     [Convert]::ToBase64String([Text.Encoding]::UTF8.GetBytes((Get-Content .\\serviceAccountKey.json -Raw)))
FIREBASE_SERVICE_ACCOUNT_JSON_BASE64=base64_of_service_account_json  # Build-only on Netlify
# Fallback (supported):
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your_project_id.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# Stripe Configuration
# Get these from: https://dashboard.stripe.com/apikeys
# IMPORTANT: Secret key (STRIPE_SECRET_KEY) is server-side only - NEVER expose to client!
# Publishable key (NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY) is safe for client-side

STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_stripe_webhook_secret_here

# Upstash Redis (Rate limiting; server-side)
# Required for durable rate limiting in the Netlify runtime (serverless).
# IMPORTANT: Some sensitive endpoints are configured to FAIL CLOSED (503) on Netlify if Redis is not available.
# This is intentional to prevent abuse when an in-memory limiter would be ineffective.
UPSTASH_REDIS_REST_URL=https://your-upstash-rest-url.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_upstash_rest_token

# Stripe Price IDs for subscriptions (Products/Prices in Stripe Dashboard)
# Required for /api/stripe/subscriptions/create
#
# Preferred (Seller Tiers):
STRIPE_PRICE_ID_PRIORITY=price_your_priority_monthly_price_id
STRIPE_PRICE_ID_PREMIER=price_your_premier_monthly_price_id
#
# Legacy fallbacks (still supported):
STRIPE_PRICE_ID_PRO=price_your_priority_monthly_price_id
STRIPE_PRICE_ID_ELITE=price_your_premier_monthly_price_id

# Auto-release fallback (OFF by default)
# This is a safety net only. Primary payout flow is manual admin release.
AUTO_RELEASE_ENABLED=false
AUTO_RELEASE_HOURS_AFTER_DELIVERY=72
# Optional: do not auto-release above this amount
AUTO_RELEASE_MAX_AMOUNT_CENTS=5000000

# Emergency operations flags (OFF by default)
# These are intended for incident response and diligence expectations.
# They should not be enabled in normal operation.
GLOBAL_PAYOUT_FREEZE_ENABLED=false
GLOBAL_CHECKOUT_FREEZE_ENABLED=false

# Brevo (Newsletter)
# IMPORTANT: Server-side only. Do NOT expose this key to the client.
BREVO_API_KEY=your_brevo_api_key_here
BREVO_NEWSLETTER_LIST_ID=123

# Transactional Email
# Provider router:
# - EMAIL_PROVIDER=sendgrid (recommended in production)
# - EMAIL_DISABLED=true to noop all sends (emergency kill-switch)
EMAIL_PROVIDER=sendgrid
EMAIL_DISABLED=false
#
# SendGrid (Transactional email; server-side only)
SENDGRID_API_KEY=your_sendgrid_api_key
EMAIL_FROM=notify@agchange.app
EMAIL_FROM_NAME=Agchange
EMAIL_REPLY_TO=support@agchange.app
#
# Optional: used by /api/admin/test-email when no `to` is provided
SENDGRID_TEST_TO=michael@redwolfcinema.com
#
# Legacy fallback (optional):
# If BREVO_API_KEY is set, transactional email sends via Brevo SMTP API.
# Otherwise falls back to Resend when RESEND_API_KEY is set.
RESEND_API_KEY=re_xxxxx
FROM_EMAIL=noreply@agchange.app
FROM_NAME=Agchange

# SMS (optional)
# Uses Twilio. Server-side only.
SMS_DISABLED=true
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_FROM=+15551234567

# AI Admin Summaries (optional)
# Server-side only. Requires OpenAI API key.
# Set to 'true' to enable AI-assisted admin summaries.
AI_ADMIN_SUMMARY_ENABLED=false

# AI Dispute Summaries (optional)
# Server-side only. Requires OpenAI API key.
# Set to 'true' to enable AI-assisted dispute summaries.
AI_DISPUTE_SUMMARY_ENABLED=false

# AI Admin Draft Responses (optional)
# Server-side only. Requires OpenAI API key.
# Set to 'true' to enable AI-drafted admin responses for support tickets.
# Drafts are editable and require manual send - AI never auto-sends messages.
AI_ADMIN_DRAFT_ENABLED=false

# AI Help Chat (optional)
# Server-side only. Requires OpenAI API key and Knowledge Base articles.
# Set to 'true' to enable AI help chat in the help widget.
# AI answers are strictly grounded in Knowledge Base articles only.
AI_HELP_CHAT_ENABLED=false

# OpenAI API Key (shared by all AI features)
# Server-side only - NEVER expose to client!
OPENAI_API_KEY=sk-your_openai_api_key_here

# Sentry Error Monitoring (optional but recommended for production)
# Get your DSN from: https://sentry.io/settings/[org]/projects/[project]/keys/
# Server-side DSN (required for API route error tracking)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# Client-side DSN (optional - only if you want client-side error tracking)
NEXT_PUBLIC_SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# Environment name (e.g., production, staging, development)
SENTRY_ENVIRONMENT=production
# Release version (optional - helps track deployments)
SENTRY_RELEASE=
# Traces sample rate (0.0 to 1.0) - lower in production to reduce overhead
SENTRY_TRACES_SAMPLE_RATE=0.1

# Netlify build hook (optional - for "Clear cache and deploy" from repo)
# Site configuration > Build & deploy > Build hooks > Add build hook, then paste URL:
# NETLIFY_BUILD_HOOK_URL=https://api.netlify.com/build_hooks/your-hook-id